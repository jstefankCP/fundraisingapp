<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop Popcorn | City Pop Fundraising</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Shop Popcorn for Our Fundraiser!</h1>
  </header>

  <section class="fundraiser-details">
    <p><strong>Fundraising Cause:</strong> City Pop Fundraiser for Local Teams</p>
    <p><strong>Organization:</strong> City Pop Fundraising</p>
    <p class="metrics"><strong>Days Left:</strong> 12 days remaining</p>
    <p class="metrics"><strong>Amount Raised:</strong> $2,430 / $5,000 Goal</p>

    <div class="share-section">
      <p>Share this fundraiser:</p>
      <button onclick="shareLink()">Share via Link</button>
      <button onclick="shareTwitter()">Share on X</button>
      <button onclick="shareFacebook()">Share on Facebook</button>
    </div>
  </section>

  <!-- Shopify Collection Component -->
  <div id='collection-component-1761423819822'></div>

  <footer>
    Â© 2025 City Pop Fundraising. All rights reserved.
  </footer>

  <!-- Shopify Buy Button Snippet -->
  <script type="text/javascript">
/*<![CDATA[*/
(function () {
  // Extract specific URL parameters
  function getFundraiserParams() {
    const params = {};
    const urlParams = new URLSearchParams(window.location.search);
    ['fundraiser_id', 'organization_id', 'user_id'].forEach(key => {
      const value = urlParams.get(key);
      if (value) params[key] = value;
    });
    return params;
  }

  const fundraiserParams = getFundraiserParams();
  const shopifyParams = Object.entries(fundraiserParams)
    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)
    .join('&');

  var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';

  if (window.ShopifyBuy) {
    if (window.ShopifyBuy.UI) {
      ShopifyBuyInit();
    } else {
      loadScript();
    }
  } else {
    loadScript();
  }

  function loadScript() {
    var script = document.createElement('script');
    script.async = true;
    script.src = scriptURL;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
    script.onload = ShopifyBuyInit;
  }

  function ShopifyBuyInit() {
    var client = ShopifyBuy.buildClient({
      domain: 'city-pop-fundraising.myshopify.com',
      storefrontAccessToken: 'd18a70960882c060cc472257ab67a4d3',
    });

    ShopifyBuy.UI.onReady(client).then(function (ui) {
      ui.createComponent('collection', {
        id: '456057717025',
        node: document.getElementById('collection-component-1761423819822'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: {
          product: {
            contents: {
              button: false,
              buttonWithQuantity: true
            },
            styles: {
              button: {
                "background-color": "#0567e8",
                ":hover": { "background-color": "#055dd1" },
                ":focus": { "background-color": "#055dd1" },
                "border-radius": "25px"
              }
            },
            text: { button: "Add to cart" }
          },
          modalProduct: {
            contents: {
              button: false,
              buttonWithQuantity: true
            },
            styles: {
              button: {
                "background-color": "#0567e8",
                ":hover": { "background-color": "#055dd1" },
                ":focus": { "background-color": "#055dd1" },
                "border-radius": "25px"
              }
            },
            text: { button: "Add to cart" }
          },
          cart: {
            popup: false,
            styles: {
              button: {
                "background-color": "#0567e8",
                ":hover": { "background-color": "#055dd1" },
                ":focus": { "background-color": "#055dd1" },
                "border-radius": "25px"
              }
            },
            text: {
              total: "Subtotal",
              button: "Checkout"
            },
            events: {
              afterInit: (cart) => {
                cart.onCheckout = () => {
                  const checkoutUrl = cart.model.webUrl + (shopifyParams ? '&' + shopifyParams : '');
                  cart.checkout.open(checkoutUrl);
                };
              }
            }
          },
          toggle: {},
          productSet: {}
        },
      });
    });
  }
})();
/*]]>*/
</script>
</body>
</html>
